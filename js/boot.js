var app=angular.module("guoqing2013.yunkooApp",["ngRoute","ngAnimate","ngResource","ngStorage","ngSanitize","ajoslin.mobile-navigate","hmTouchEvents"]);app.config(["$httpProvider",function(A){A.defaults.useXDomain=true;delete A.defaults.headers.common["X-Requested-With"];A.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8"}]);app.controller("MainCtrl",["$scope","$navigate",function(D,A){D.$navigate=A;var C={delay:1800,date:null,timeoutId:null};var B={open:function(E){if(typeof(E)!=="undefined"){C.delay=E}C.date=new Date();if(C.timeoutId){clearTimeout(C.timeoutId)}C.timeoutId=setTimeout(function(){D.$apply(function(){D.loading=true})},C.delay)},close:function(){if(C.timeoutId){var E=new Date();if(C.date&&(E-C.date)<=C.delay&&C.timeoutId){clearTimeout(C.timeoutId)}D.loading=false}C.timeoutId=null}};D.$on("LOAD",function(){B.open()});D.$on("UNLOAD",function(){B.close()})}]);app.directive("navTo",["$navigate",function(A){return{restrict:"A",link:function(D,E,C){var B=function(){var G=C["navTo"];var F=C.ani;if(G=="back"){D.$apply(function(){A.back()})}else{if(F&&F.substr(0,1)=="-"){F=F.substr(1);D.$apply(function(){A.go(G,F,true)})}else{D.$apply(function(){A.go(G,F)})}}};if(C["ebind"]){if(isTouchDevice){E.bind(C["ebind"],B)}else{E.bind("click",B)}}else{if(window.navigator.msPointerEnabled){E.bind("click",B)}else{Hammer(E[0]).on("tap",B)}}}}}]);app.directive("touchact",function(){return{restrict:"A",link:function(D,E,C){if(!("add" in document.body.classList)){return}var F=C["touchact"]||"navfocus";var B="touchstart";var A="touchend";if(window.navigator.msPointerEnabled){B="MSPointerDown";A="MSPointerUp"}E.bind(B,function(){var G=this.classList;G.add(F);setTimeout(function(){G.remove(F)},300)});E.bind(A,function(){this.classList.remove(F)})}}});