/* ngStorage 0.3.0 | Copyright (c) 2013 Gias Kay Lee | MIT License */
"use strict";!function(){function A(B){return["$rootScope","$window",function(F,G){for(var J,C,H,I=G[B]||(console.warn("This browser does not support Web Storage!"),{}),D={$default:function(L){for(var K in L){angular.isDefined(D[K])||(D[K]=L[K])}return D},$reset:function(L){for(var K in D){"$"===K[0]||delete D[K]}return D.$default(L)}},E=0;E<I.length;E++){(H=I.key(E))&&"ngStorage-"===H.slice(0,10)&&(D[H.slice(10)]=angular.fromJson(I.getItem(H)))}return J=angular.copy(D),F.$watch(function(){C||(C=setTimeout(function(){if(C=null,!angular.equals(D,J)){angular.forEach(D,function(M,L){angular.isDefined(M)&&"$"!==L[0]&&I.setItem("ngStorage-"+L,angular.toJson(M)),delete J[L]});for(var K in J){I.removeItem("ngStorage-"+K)}J=angular.copy(D)}},100))}),"localStorage"===B&&G.addEventListener&&G.addEventListener("storage",function(K){"ngStorage-"===K.key.slice(0,10)&&(K.newValue?D[K.key.slice(10)]=angular.fromJson(K.newValue):delete D[K.key.slice(10)],J=angular.copy(D),F.$apply())}),D}]}angular.module("ngStorage",[]).factory("$localStorage",A("localStorage")).factory("$sessionStorage",A("sessionStorage"))}();